---
page_title: "cm_variable Resource - terraform-provider-cm"
subcategory: ""
description: |-
  Creates, updates and destroys variables.
  Variable can be either a Terraform variable or an Environment variable.
---

# cm_variable (Resource)

Creates, updates and destroys variables.
Variable can be either a Terraform variable or an Environment variable.

## Learn More

- [Load Terraform Variables Automatically in ControlMonkey](https://controlmonkey.io/news/load-terraform-variables/)
- [Variable Conditions for Self-service Infrastructure](https://controlmonkey.io/news/variable-conditions-for-self-service-infrastructure/)

## Example Usage

### Organization variable that will be inherited by all namespaces, templates, stacks.
```terraform
resource "cm_variable" "organization_mandatory_variable" {
  scope          = "organization"
  key            = "ORG_BU_IDENTIFIER"
  type           = "envVar"
  value          = "162"
  description    = "Environment variable across all business units"
  is_sensitive   = false
  is_overridable = false
}
```

### Template variable that requires a value from every ephemeral stack launched based on it.
```terraform
resource "cm_variable" "dev_basic_app_mandatory_owner" {
  scope          = "template"
  scope_id       = cm_template.template.id
  key            = "Owner"
  type           = "tfVar"
  description    = "Provide your name. It will be used as the tag value of the the same key"
  is_sensitive   = false
  is_overridable = true
  is_required    = true
}
```

### This template variable sets a default volume size value of 8 GB for all stacks launched based on it. While a new ephemeral stack can override the volume size, it must not exceed 50GB.
```terraform
resource "cm_variable" "stage_ephemeral_stacks_default_volume_size" {
  scope            = "template"
  scope_id         = cm_template.template.id
  key              = "volume_size"
  type             = "tfVar"
  value            = 8
  description      = "Default volume size for ephemeral stacks in GB. Can be overridden up to 50GB"
  is_sensitive     = false
  is_overridable   = true
  value_conditions = [
    {
      operator = "lte"
      value    = 50
    }
  ]
}
```

### This is the default value of the environment variable for TF_LOG, set to ERROR.
```terraform
resource "cm_variable" "default_log" {
  scope           = "namespace"
  scope_id        = cm_namespace.namespace.id
  key             = "TF_LOG"
  type            = "envVar"
  value           = "ERROR"
  is_sensitive    = false
  is_overridable  = true
}
```

### When launching an ephemeral stack from a template, the value should be an instance type from the set of allowed instance types.
```terraform
resource "cm_variable" "ephemeral_stack_instance_types" {
  scope           = "template"
  scope_id        = cm_template.template.id
  key             = "instance_type"
  type            = "tfVar"
  description     = "This tfVar is injected as the instance type of the EC2 instance"
  is_sensitive    = false
  is_overridable  = true
  is_required     = true
  value_conditions = [
    {
      operator = "in"
      values   = ["t2.micro", "t2.nano"]
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `is_overridable` (Boolean) Indicates if the variable can be overridden by a lower-level scope.
- `is_sensitive` (Boolean) Indicates if the variable value is sensitive and requires encryption.
- `key` (String) The key of the variable.
- `scope` (String) Scope of the variable. Allowed values: [organization, namespace, template, blueprint, stack].
- `type` (String) Type of the variable. Allowed values: [tfVar, envVar].

### Optional

- `description` (String) Description for the variable.
- `display_name` (String) Display name provides the flexibility to assign a descriptive name to the variable. This name will be shown in the UI. It can be useful especially for self service variables to make the variables more user-friendly.
- `is_required` (Boolean) This setting applies to template variables without a specified value. Stacks created from the template need to provide a value for this variable.
- `scope_id` (String) The ID of the resource to which the variable is attached.
- `value` (String, Sensitive) The value of the variable.
- `value_conditions` (Attributes List) Specify conditions for the variable value using an operator and another value. Typically used for stacks launched from templates. For more information: [ControlMonkey Docs] (https://docs.controlmonkey.io/main-concepts/variables/variable-conditions) (see [below for nested schema](#nestedatt--value_conditions))

### Read-Only

- `id` (String) The unique ID of the variable.

<a id="nestedatt--value_conditions"></a>
### Nested Schema for `value_conditions`

Required:

- `operator` (String) Logical operators. Allowed values: [ne, gt, gte, lt, lte, in, startsWith, contains].

Optional:

- `value` (String) The value associated with the operator. Input a number or string depending on the chosen operator. Use `values` field for operator of type `in`
- `values` (List of String) A list of strings when using operator type `in`. For other operators use `value`

## Import

`cm_variable` can be imported using the ID of the Variable, e.g.

```shell
terraform import cm_variable.variable var-123
```